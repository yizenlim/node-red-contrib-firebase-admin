<script type="text/javascript">
  RED.nodes.registerType('rtdb-on',{

    category: 'firebase-admin',
    color: '#a6bbcf',
    defaults: {
      name: {value:""},
      path: {value:""},
      cred: {value: "", type: 'firebase-config'}
    },
    inputs:1,
    outputs:1,
    icon: "firebase-admin-icon.png",
    label: function() {
      return this.name||"rtdb-on";
    },

    oneditsave: function() {
      let type = $('#apitype-select').val()
      console.log('type is set to '+type)

    },

    oneditprepare: function() {
      $('#apitype-select').change(function () {
        $("#node-input-apitype").val($(this).find('option:selected').val())
      });
      $("#apitype-select").val($("#node-input-apitype").val())
      $('#apitype-select').trigger('change');
    }
  });


</script>

<script type="text/html" data-template-name="rtdb-on">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-row">
        <label for="node-input-path"><i class="icon-tag"></i> Path</label>
        <input type="text" id="node-input-path" placeholder="Path">
    </div>

    <div class="form-row">
      <label for="node-input-ontype"><i class="icon-tag"></i> On Type</label>
      <input type="text" id="node-input-ontype" placeholder="On Type">
  </div>

    <div class="form-row">
        <label for="node-input-cred"><i class="icon-tag"></i> Credentials</label>
        <input type="text" id="node-input-cred" placeholder="Name">
    </div>

  

</script>

<script type="text/x-red" data-help-name="rtdb-on">
    <p>Get data from a path in the rtdb database </p>
<p>
input: {"payload": {"path": "foo/bar" , "ontype" : "child_added" , "limittolast": 2, "orderbychild": "height"}}
</p><p>
output: whatever data was at the path "foo/bar" in the rtdb database</p>
</p>
<p> ontype defaults to on "value", please enter a specific type if needed, "child_added"/"child_moved"/"child_changed"/"child_removed"</p>
</script>